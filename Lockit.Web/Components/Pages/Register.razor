@page "/register"
@using Lockit.Models
@using Lockit.Web.Services

<MudPaper Class="pa-2 ma-5" Elevation="3">
	@if (registrationDone == false)
	{
		<EditForm Model="@locker" OnValidSubmit="OnValidSubmit">
			<DataAnnotationsValidator />
			<MudGrid>
				<MudItem>
					<MudTextField Label="Name" @bind-Value="@locker.Student.Name"></MudTextField>
					<MudTextField Label="Lastname" @bind-Value="@locker.Student.LastName"></MudTextField>
					<MudTextField Label="Class" @bind-Value="@locker.Student.Class"></MudTextField>
					<MudButton ButtonType="ButtonType.Submit">Register</MudButton>
				</MudItem>
			</MudGrid>
		</EditForm>
	}
	else
	{
		<MudAlert Severity="Severity.Success">Registration successful!</MudAlert>
	}
</MudPaper>

@inject LockerService LockerService
@code {
	private Locker locker = new Locker();

	private bool registrationDone = false;

	private async Task OnValidSubmit()
	{
		bool success = true; // await LockerService.RegisterLocker(locker);
		if (success)
		{
			registrationDone = true;
			locker = new Locker(); // Reset the form after submission
			

		}
	}
}
